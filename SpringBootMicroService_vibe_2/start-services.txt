@echo off
echo Starting Patient Record Management System...

echo.
echo Starting Eureka Discovery Server...
start "Eureka Server" cmd /k "cd eureka-server && mvn spring-boot:run"

echo Waiting for Eureka Server to start...
timeout /t 30 /nobreak > nul

echo.
echo Starting API Gateway...
start "API Gateway" cmd /k "cd api-gateway && mvn spring-boot:run"

echo Waiting for API Gateway to start...
timeout /t 30 /nobreak > nul

echo.
echo Starting Patient Service...
start "Patient Service" cmd /k "cd patient-service && mvn spring-boot:run"

echo Waiting for services to register with Eureka...
timeout /t 30 /nobreak > nul

echo.
echo Starting Doctor Service...
start "Doctor Service" cmd /k "cd doctor-service && mvn spring-boot:run"

echo Waiting for services to register with Eureka...
timeout /t 30 /nobreak > nul

echo.
echo Starting Appointment Service...
start "Appointment Service" cmd /k "cd appointment-service && mvn spring-boot:run"

echo Waiting for services to register with Eureka...
timeout /t 30 /nobreak > nul

echo Starting Web Frontend...
start "Web Frontend" cmd /k "cd web-frontend && mvn spring-boot:run"
timeout /t 5 /nobreak


echo.
echo All services are starting up. Please wait a few moments for all services to be ready.
echo.
echo Service URLs:
echo Eureka Dashboard: http://localhost:8761
echo API Gateway: http://localhost:8080
echo Patient Service: http://localhost:8081
echo Doctor Service: http://localhost:8082
echo Appointment Service: http://localhost:8083
echo Web Frontend: http://localhost:9090
echo.
echo Use the API Gateway (port 8080) as the main entry point for all requests.
pause